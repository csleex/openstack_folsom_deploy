{"tagline":"OpenStack Folsom bootstrap script for Ubuntu Server 12.04 LTS","note":"Don't delete this file! It's used internally to help with page regeneration.","body":"OpenStack Folsom bootstrap script\r\n=======================\r\n\r\nOpenStack Folsom bootstrap script for Ubuntu Server 12.04 LTS.\r\n\r\nAuthor\r\n----\r\nTomokazu Hirai @jedipunkz\r\n\r\nNotice\r\n----\r\n\r\nThis script code was tested only for all in one installation. Now I am\r\ndeveloping for separated compornent nodes, and addtitional compute nodes.\r\nPlease wait a moment :D or Feel FREE for your fork.\r\n\r\nMotivation\r\n----\r\n\r\ndevstack is very usefull for me. I am using devstack for understanding\r\nopenstack and especially Quantum ! ;) but when I reboot devstack node, all of\r\nopenstack compornents was not booted. That is not good for me. and I wanted to\r\nuse Ubuntu Cloud Archive packages.\r\n\r\nPremise Environment\r\n----\r\n\r\nYou should have a machine with 3 NICs. eth0 is public network interface. eth1\r\nis VM (data) network interface, this will be used for communication to other\r\nVMs on other compute nodes. eth2 is completely for management.\r\n\r\nfixed_range is not same as VM (data) segment. so If you want use GRE Tunneling\r\nfor each VMs communication, these segments must not be same.\r\n\r\n\r\n            management segment 192.168.0.0/24\r\n    +-------------------------------------------\r\n    | eth2 192.168.0.8\r\n    +------------+\r\n    |            | eth1\r\n    | controller | fixed_range = 172.24.17.0/24\r\n    |            | data segment = 172.26.0.0/24\r\n    +------------+\r\n    | eth0                                      +--------+\r\n    +-------------------------------------------| Router |--> The Internet\r\n            public segment 10.200.8.0/24        +--------+\r\n\r\nso you should setup each NICs like this. this is /etc/network/interface\r\n\r\n    # The loopback network interface\r\n    auto lo\r\n    iface lo inet loopback\r\n    \r\n    auto eth0\r\n    iface eth0 inet static\r\n        up ifconfig $IFACE 0.0.0.0 up\r\n        down ifconfig $IFACE down\r\n        address 10.200.8.10\r\n        netmask 255.255.255.0\r\n        dns-nameservers 8.8.8.8\r\n        dns-search cpi.ad.jp\r\n    \r\n    auto eth1\r\n    iface eth1 inet static\r\n        address 172.26.0.110\r\n        netmask 255.255.255.0\r\n    \r\n    auto eth2\r\n    iface eth2 inet static\r\n        address 192.168.0.8\r\n        netmask 255.255.255.0\r\n        gateway 192.168.0.1\r\n        dns-nameservers 8.8.8.8 8.8.4.4\r\n\r\nYou can install and manage openstack via eth2 NiC. When you run this script,\r\nopenvswitch will adding eth0 and eth1 for bridge interfaces.\r\n\r\nand Especialy you need to have a disk device for cinder such as /dev/sda6.\r\n\r\nHow to use\r\n----\r\n\r\nUpdate these environment on set_env() function.\r\n\r\n    # for all in one\r\n    HOST_IP='192.168.0.8'\r\n    # for separated nodes (in near future, these env will be usefull)\r\n    NOVA_IP='192.168.0.8'\r\n    GLANCE_IP='192.168.0.8'\r\n    KEYSTONE_IP='192.168.0.8'\r\n    CINDER_IP='192.168.0.8'\r\n    DB_IP='192.168.0.8'\r\n    QUANTUM_IP='192.168.0.8'\r\n    # etc env\r\n    MYSQL_PASS='secret'\r\n    CINDER_VOLUME='/dev/sda6'\r\n    DATA_NIC='eth1'\r\n    PUBLIC_NIC='eth0'\r\n\r\n    # quantun env\r\n    INT_NET_GATEWAY='172.24.17.254'\r\n    INT_NET_RANGE='172.24.17.0/24'\r\n    EXT_NET_GATEWAY='10.200.8.1'\r\n    EXT_NET_START='10.200.8.36'\r\n    EXT_NET_END='10.200.8.40'\r\n    EXT_NET_RANGE='10.200.8.0/24'\r\n\r\nRun this script.\r\n\r\n    % git clone https://github.com/jedipunkz/openstack_folsom_deploy.git\r\n\t% cd openstack_folsom_deploy\r\n\t% ./deploy allinone\r\n\r\nThat's all. :D\r\n\r\nNow you can create and boot VMs on Horizon (http://${HOST_IP}/horizon) .\r\n\r\nUsing floating ip\r\n----\r\n\r\nIf you want to use floating ip, do these operation.\r\n\r\n    % quantum net-list\r\n\t% quantun floatingip-create <ext_net_id>\r\n\t% quantun floatingip-list\r\n\t% quantum port-list\r\n\t% quantum floatingip-associate <floatingip_id> <vm_port_id>\r\n\r\nEnabling to access to VMs\r\n----\r\n\r\nIf you want to access to VMs from anyware, do these operation.\r\n\r\n    % source $HOME/openstackrc\r\n\t% nova secgroup-add-rule default tcp 22 22 0.0.0.0/0\r\n\t% nova secgroup-add-rule default icmp -1 -1 0.0.0.0/0\r\n\t% nova secgroup-list-rules default\r\n","name":"Openstack folsom deploy","google":"UA-30563095-3"}